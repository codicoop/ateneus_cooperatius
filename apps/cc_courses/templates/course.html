{% extends "base.html" %}

{% block head %}
    {% load staticfiles %}
    <script src="{% static 'js/modal.js' %}"></script>
{% endblock %}

{% block content %}
{% load enrollable %}
<div class="page-content">
<h1>{{ course.title }}</h1>
<h1>{{ test }}</h1>

    <h2>Activitats programades</h2>

    <ul>
    {% for activity in activities %}
        <li>
            <p class="title">{{ activity.name }}</p>
            <p>{{ activity.date_start }}</p>
        </li>
        {% if activity|can_enroll:user %}
        <a href="#" onclick="javascript:showModal('#modal-confirm');" class="enroll-button">
        <div>
            Incriure's
        </div>
        </a>
        {% endif %}
        {% if user in object.enrolled.all %}
        Ja estàs inscrita a aquesta activitat.
        {% endif %}
    {% endfor %}
    </ul>

</div>

<div id="modal-confirm" class="modal">
    <span class="modal-close" onclick="javascript:hideModal('#modal-confirm');">&times;</span>
    <div class="modal-container">
        <div class="modal-title">
            Confirmació
        </div>
        <div class="modal-content">
            Està a punt d'inscriure's al curs <strong>{{ object.title }}</strong>.
            <br>
            {% if user.is_anonymous %}
            Però per fer-lo haurà de fer login abans:
            {% else %}
            Està segur?
            {% endif %}
        </div>
        <div class="modal-buttons">
            <a href="{% url 'enroll_course' slug=object.slug %}" class="enroll-button">
            <div>
                {% if user.is_anonymous %}Login{% else %}Incriure's{% endif %}
            </div>
            </a>
        </div>
    </div>
</div>
<script>
    $( document ).ready(function() {
        makeModal('#modal-confirm');
    });
</script>
{% endblock %}