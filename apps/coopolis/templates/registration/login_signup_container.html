{% extends "base.html" %}

{% block content %}
<div class="page-content">
    <div class="message-container">
    {% if login_form.errors %}
      <p class="error-message">Usuari i/o contrasenya incorrectes. Si us plau torna-ho a intentar.</p>
    {% endif %}

    {% if next %}
      {% if user.is_authenticated %}
        <p class="info-message">El teu compte no té accés a aquesta pàgina. Per continuar, acedeix amb el teu compte o
            crea un compte nou si encara no t'has registrat.</p>
      {% else %}
        <p class="info-message">Si us plau accedeix amb el teu compte per accedir a aquesta pàgina.</p>
      {% endif %}
    {% endif %}
    </div>

    <div class="generic-content">
        <h1>Accedir</h1>
        <form method="post" action="{% url 'login_post' %}{% if request.GET %}?{{ request.GET.urlencode }}{% endif %}">
        {% csrf_token %}
            <p>
              {{ login_form.username.label_tag }}
              {{ login_form.username }}
            </p>
            <p>
              {{ login_form.password.label_tag }}
              {{ login_form.password }}
            </p>
            <p>
              {{ login_form.remember_me.label_tag }}
              {{ login_form.remember_me }}
            </p>
            <p>
              <input type="submit" value="Accedir" />
              <input type="hidden" name="next" value="{{ next }}" />
            </p>
            <p><a href="{% url 'password_reset' %}">Has perdut la contrasenya?</a></p>
        </form>

        <h1>Registrar-se</h1>
          <form method="post" action="{% url 'signup_post' %}{% if request.GET %}?{{ request.GET.urlencode }}{% endif %}">
            {% csrf_token %}
            {{ signup_form.as_p }}
            <button type="submit">Crear compte</button>
          </form>
    </div>
</div>
{% endblock %}
