{% extends "base.html" %}
{% load thumbnail static %}

{% block home_is_active %}{% endblock %}
{% block enrollments_is_active %}is-active{% endblock %}
{% block projects_is_active %}{% endblock %}

{% block content %}
{% include './components/header_topbar.html' %}
<div class="courses-list">
  <section class="courses-list__submenu grid-content">
		<div class="grid-item-full">
			<div class="submenu">
				<a href="{% url 'courses' %}">
					<div class="submenu__item is-active">
						<p>Oferta formativa</p>
					</div>
				</a>
				<a href="{% url 'my_activities' %}">
					<div class="submenu__item">
						<p>Els meus cursos</p>
					</div>
				</a>
			</div>
		</div>
	</section>
  <section class="courses-list__grid">
    {% for course in future_courses %}
      <div class="course-card">
        <!-- <div class="course-card__pretitle text-xsm">
          Nou: sector o cercle, potser?
          Cadascun ha de tenir el seu color propi
          <h2>XXXXXXXXXXX</h2>
        </div> -->
        <div class="course-card__title text-md">
          <h2>{{ course.title }}</h2>
        </div>
        <!-- Nou: llistat de tags
        <div class="couse-card__tags tags">
          FOR cada tag
          <div class="tag text-xsm">
            <p>XXXXX</p>
          </div>
          endfor
        </div> -->
        {% if course.aimed_at != "" %}
        <div class="course-card__bloc">
          <div class="course-card__subtitle text-menu">
            <p>Adreçat a</p>
          </div>
          <div class="course-card__text richtext">
            <p>{{ course.aimed_at|safe }}</p>
          </div>
        </div>
        {% endif %}
        <div class="course-card__bloc grid-bloc">          
          <div class="course-card__subtitle text-menu">
            <p>Sessions: {{ course.activities.count }}</p>
          </div>
          {% for session in course.get_public_activities %}
          <div class="course-card__subbloc subbloc">
            <div class="subbloc__title text-sm">
              <p>{{ session.date_start|date:"d/m/y" }}</p>
            </div>
            <div class="subbloc__subtitle text-sm">
              <p>{{ session.starting_time }} - {{ session.ending_time }}</p>
            </div>
            <div class="subbloc__text text-sm richtext">
              {{ session.name|safe }}
            </div>
          </div>
          {% endfor %}
        </div>
        <div class="course-card__btn">
          <a href="{{ course.absolute_url }}">
            <div class="btn btn--primary btn__text">
              <p>Veure les sessions</p>
            </div>
          </a>
        </div>
      </div>
    {% endfor %}

    {% if not future_courses %}
      <p class="margin-block">En aquests moments no hi ha cap formació programada.</p>
    {% endif %}
  </section>
</div>
{% endblock %}
